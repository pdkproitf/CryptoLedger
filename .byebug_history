c
Account.find 129
to_account
to_account_ids
from_account_ids
account_ids
c
filter_params
c
filter_params
filter_paramsc
c
filter_paramsc
filter_params
c
filter_params
c
filter_params
params
c
params
filter_params
c
user.transactions.build(
        transaction_type: params[:transaction_type],
        from_account_id: params[:from_account_id],
        to_account_id: params[:to_account_id],
        amount: params[:amount],
        exchange_rate: params[:exchange_rate],
        notes: params[:notes]
      )
user.transactions.new(
        transaction_type: params[:transaction_type],
        from_account_id: params[:from_account_id],
        to_account_id: params[:to_account_id],
        amount: params[:amount],
        exchange_rate: params[:exchange_rate],
        notes: params[:notes]
      )
params[:transaction_type]
build_transaction
c
exception
n
c
n
c
json_response['data'].map { |d| d['attributes']['transaction-type'] }.uniq
json_response['data'].map { |d| d['attributes']['transaction-type'] }
json_response['data'].map { |d| d['attributes'] }
json_response['data']
json_response
c
json_attributes
n
json_attributes
expected_data
n
c
json_response['data']c
json_response['data']
jjson_response['data']
json_attributes
expected_data
n
c
n
c
n
json_attributes
expected_data
n
c
json_attributes = json_response['data'].first['attributes']
json_attributes
json_attributes['transaction-type']
expected_data[:transaction_type]
expected_data
c
expected_data[:transaction_type]
expected_data
json_attributes
c
json_attributes['transaction_type']
n
json_attributes
json_response['data']
json_attributes
expected_data
n
json_response
n
c
user.id
user_ids
n
user_idsn
c
user_ids
n
c
json_response
ap json_response
ap json_response['data']
n
c
json_response['data'].size
n
c
expected_account = expected_accounts.find { |acc| acc.id == account_json['id'].to_i }
expected_accounts
expected_account
account_json
c
expect(json_response['errors']['detail']).to include(a_string_matching(error))
a_string_matching(error)
json_response['errors']['detail']
error
json_response
c
expected_data
c
e
n
data[:transaction].call
data[:transaction]
c
data[:]
data[:transaction]
data
c
instance_exec &params[:params]
instance_exec params[:params]
params[:params].call
params[:params]
params[:params].call
params[:params]
params.
params
c
errors
c
errors
c
debit_transaction?
account.balance
account = user.accounts.find_by(id: params[:from_account_id])
params
errors
n
c
result
n
validate_params
c
transaction.valid?
transaction
n
c
transaction.valid?
transaction.valid
n
errors
c
params
params[:from_account_id]
c
params[:from_account_id]
params
user.accounts.find_by(id: params[:from_account_id])
errors
c
user.accounts.find_by(id: params[:from_account_id])
errors
c
current_user.accounts.transactions_as_from.new
current_user.transactions_as_from.build
current_user.transactions_as_from.bui;ld
current_user.transactions_as_from.new
current_user.transactions_as_from
current_user.transactions
transaction
c
transaction
n
current_user.transactions
current_user
c
transaction.errors.full_messages
transaction.valid?
transaction
c
params.permit(:type)[:type].presence.split(',')
params.permit(:type)[:type]
params.permit(:type)
params.permit(type:)
params.permit(type: [])
c
params.permit(type: [])
c
params.permit(type: [])
c
params.permit(type: [])
c
params.permit(type: [])
params.permit(type: []))
c
json_response
